<!DOCTYPE html>
<html>
  <head>
    <title>Twittler!</title>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="main.css">
  </head>
  <body>
    <h1 class="header">Welcome to Twittler!<img src="single-bird-icon.png" class="logo" data-name="home"></h1>
    <section class="grid">
      <div class="nav">
        <h3>Who You're Following</h3>

        <div class = "following">
          <p class="nav-list">@shawndrost</p><img class="nav-pics" src="user-pics/shawndrost.jpg" data-name="shawndrost">
          <p class="nav-list">@sharksforcheap</p><img class="nav-pics" src="user-pics/sharksforcheap.jpg" data-name="sharksforcheap"> 
          <p class="nav-list">@mracus</p><img class="nav-pics" src="user-pics/mracus.jpg" data-name="mracus">
          <p class="nav-list">@douglascalhoun</p><img class="nav-pics" src="user-pics/douglascalhoun.png" data-name="douglascalhoun"> 
          <p class="nav-list">Refresh your timeline</p><img class="nav-pics" src="single-bird-icon.png" data-name="home">
        <div>
      </div>
      <div class="timeline">
      <script>

        $(document).ready(function(){
          var $body = $('body');

          function clearTimeline() {
            $('.messageBox').remove();
          }

          function printTweets(user) {
            clearTimeline();

            var feed = [];

            if (user === 'home') {
              feed = streams.home;
            } else {
              feed = streams.users[user];
            }

            var index = feed.length - 1;
            while(index >= 0){
              var tweet = feed[index];

              var $messageBox = $('<div class="messageBox"></div>');
              // $('div').data('name', tweet.user);
              // var $picture = '<img class="col-left" id="profile">';
              $(tweet.pic).appendTo($messageBox);
              // $('#profile').attr('src', 'user-pics/' + tweet.pic);
              // $('#profile').remove();
              var $tweet = $('<div class="col-right"></div>');
              var $username = $('<span class="username"></span>');
              $username.text(tweet.name);
              $username.appendTo($tweet);
              var $handle = $('<a class="handle"></a>');
              $('a').closest('.messageBox').data('name', tweet.user);
              $handle.text('     @' + tweet.user);
              $handle.appendTo($tweet);
              var $message = $('<p class="message"></p>');
              $message.text(tweet.message);
              $message.appendTo($tweet);
              var $date = $('<p class="date"></p>');
              $date.text(tweet.created_at);
              $date.appendTo($tweet);
              $tweet.appendTo($messageBox);
              $messageBox.appendTo($body);

              index -= 1;
            }

          }

          printTweets('home');

          // setTimeout(function () {
          //   printTweets('mracus');
          // }, 1500);

          // var index = streams.home.length - 1;
          // while(index >= 0){
          //   var tweet = streams.home[index];
          //   var $tweet = $('<div class="messageBox"></div>');
          //   $tweet.text('@' + tweet.user + ': ' + tweet.message);
          //   var $date = $('<p class="date"></p>');
          //   $date.text(tweet.created_at);
          //   $date.appendTo($tweet);
          //   $tweet.appendTo($body);

          //   index -= 1;
          // }

          $('img').on('click',function(){
            var person = $(this).data('name');
            printTweets(person);

          });

        });

      </script>
    </div>
  </section>
  </body>
</html>


